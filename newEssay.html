<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="styles.css" type="text/css" />
        <link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>
        <title>New Essay</title>
    </head>
    <body>
        <div class="main">
            <div class="page">
                <div>
                    <h1>NEW ESSAY</h1>
                    <h2>1. What is your heading format?</h2>
                    <table class="table">
                        <tr>
                            <td>
                                <h3>Standard</h3>
                                <button id="a1" class="format-button" onclick="changeSelection(this);">MLA (Name, Instructor, Subject, Date Due)</button>
                                <p></p>
                                <button id="a2" class="format-button" onclick="changeSelection(this);">Name, Subject, Period, Date Due</button>
                                <p></p>
                                <button id="a3" class="format-button" onclick="changeSelection(this);">Name, Period, Date Due</button>
                                <p></p>
                            </td>
                            <td>
                                <h3>Custom</h3>
                            </td>
                        </tr>
                    </table>
                </div>
                
                <div>
                    <h2>2. Fill out header information.</h2>
                    <table class="table">
                        <tr>
                            <td>
                                <h3>Name</h3>
                                <input type="text" name="" class="header-input"/>
                                <h3>Instructor</h3>
                                <input type="text" name="" class="header-input"/>
                                <h3>Subject</h3>
                                <input type="text" name="" class="header-input"/>
                                <h3>Date Due</h3>
                                <input type="text" name="" class="header-input"/>
                                <p></p>
                            </td>
                        </tr>
                    </table>
                </div>
                
                <div>
                    <h2>3. What is your essay format?</h2>
                    <table class="table">
                        <tr>
                            <td>
                                <h3>Standard</h3>
                                <button id="b1" class="format-button" onclick="changeSelection(this);">1 intro paragraph, 3 body paragraphs, 1 conclusion paragraph</button>
                                <p></p>
                                <button id="b2" class="format-button" onclick="changeSelection(this);">1 intro paragraph, 2 body paragraphs, 1 conclusion paragraph</button>
                                <p></p>
                            </td>
                            <td>
                                <h3>Custom</h3>
                            </td>
                        </tr>
                    </table>
                </div>
                
                <div class="endofpage">
                    <h2>All set! You can start writing your essay now.</h2>
                    <button class="finish-button" onclick="startEssay();">Take me there!</button>
                </div>
            </div>
        </div>
        
        <script type="text/javascript">
            var aId = -1;
            var bId = -1;
            
            window.onload = function() {
                
            };
            
            function changeSelection(me) {
                if (me.id.charAt(0) === "a") {
                    //First change the state of the button we clicked on
                    if (me.className.indexOf("format-button-selected") == -1)
                        me.className += " format-button-selected";
                    else {
                        me.className = "format-button";
                        aId = me.id.charAt(1);
                    }

                    
                    //Look for the previous selected button
                    var target = document.getElementById("a" + aId)
                    //If we can find it...
                    if (target != null && target.id !== me.id) {
                        //Turn it back into a normal button
                        target.className = "format-button";
                    }
                    
                    console.log("beofore aId = " + aId);
                    aId = me.id.charAt(1);
                    console.log("after aId = " + aId);
                    console.log("me.className = " + me.className);
                }
                else if (me.id.charAt(0) === "b") {
                    //First change the state of the button we clicked on
                    if (me.className.indexOf("format-button-selected") == -1)
                        me.className += " format-button-selected";
                    else {
                        me.className = "format-button";
                        bId = me.id.charAt(1);
                    }

                    
                    //Look for the previous selected button
                    var target = document.getElementById("b" + bId)
                    //If we can find it...
                    if (target != null && target.id !== me.id) {
                        //Turn it back into a normal button
                        target.className = "format-button";
                    }
                    
                    console.log("beofore aId = " + bId);
                    bId = me.id.charAt(1);
                    console.log("after aId = " + bId);
                    console.log("me.className = " + me.className);
                }                
                
            }
            
            function handleSelection() {
                
            }
            
            function saveHeadings() {
                var x = document.getElementsByClassName("header-input");
                var i;
                for (i = 0; i < x.length; i++) {
                    if (i === 0)
                        sessionStorage.setItem('name', x[i].value);
                    else if (i === 1)
                        sessionStorage.setItem('instructor', x[i].value);
                    else if (i === 2)
                        sessionStorage.setItem('subject', x[i].value);
                    else if (i === 3)
                        sessionStorage.setItem('date', x[i].value);
                }
            }
            
            function startEssay() {
                saveHeadings();
                window.location.href = 'edit.html';
            }
        </script>
    </body>
</html>